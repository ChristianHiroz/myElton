{% extends '::base.html.twig' %}
{% block body %}
    {{ parent() }}
        {% for cartactivity in cart %}
            {% if cartactivity.activity.files.url == "mp3" %}
                <div class="modal fade myAudioModal" id="{{cartactivity.activity.id}}Modal" tabindex="-1" role="dialog" aria-labelledby="myAudioModalLabel" aria-hidden="true" >
                    <div class="modal-dialog" style='margin-top:200px;'>
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                <h4 class="modal-title label label-warning modalFS" id="myAudioModalLabel">Audio</h4>
                            </div>
                            <div class="modal-body" style="text-align:center; width:95%;">
                                <audio id="audioIframe" controls>
                                    {% if cartactivity.activity.files.ogg %}
                                        <source src="{{ asset(cartactivity.activity.files.ogg.uploadDir ~ '/' ~ cartactivity.activity.files.ogg.id ~ '.' ~ cartactivity.activity.files.ogg.url)}}" type="audio/ogg">
                                    {% endif %}
                                    <source src="{{ asset(cartactivity.activity.files.uploadDir ~ '/' ~cartactivity.activity.files.id ~ '.' ~ cartactivity.activity.files.url)}}" type="audio/mpeg">
                                  Votre navigateur ne supporte pas les éléments audios, veuillez le mettre à jour.
                                </audio>
                                <script src="{{ asset(cartactivity.activity.files.uploadDir ~ '/' ~ cartactivity.activity.files.id ~ '.' ~ cartactivity.activity.files.url) }}"></script>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn center-block shadow btnBeigeElton bold" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% elseif cartactivity.activity.files.url == "jpg" or cartactivity.activity.files.url == "jpeg" or cartactivity.activity.files.url == "png" %}
                <div class="modal fade" id="{{cartactivity.activity.id}}Modal" tabindex="-1" role="dialog" aria-labelledby="myPictureModalLabel" aria-hidden="true" style="height:100%;">
                    <div class="modal-dialog"  style='width:85%;'>
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                <h4 class="modal-title label label-warning modalFS" id="myPictureModalLabel">Image</h4>
                            </div>
                            <div class="modal-body" style="text-align:center; width:100%; height:0%;">
                                <img style="width:auto; height: 70%;" src="{{ asset(cartactivity.activity.files.uploadDir ~ '/' ~ cartactivity.activity.files.id ~ '.' ~ cartactivity.activity.files.url) }}" alt="{{cartactivity.activity.files.alt}}"/>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn center-block shadow btnBeigeElton bold" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% elseif cartactivity.activity.files.url == "js" %}
                <div class="modal fade myGameModal" id="{{cartactivity.activity.id}}Modal" tabindex="-1" role="dialog" aria-labelledby="myGameModalLabel" aria-hidden="true" >
                    <div class="modal-dialog" style="width: 95%; height:650px;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                <h4 class="modal-title label label-warning modalFS" id="myGameModalLabel">Jeu</h4>
                            </div>
                            <div class="modal-body" style="text-align:center; width:100%;">
                                <div id="lala" style="border:1px solid black;z-index:1;-moz-border-radius:8px;border-radius:8px;text-align:center;">
                                    <canvas width="750" height="450" id="game" style="background-color: #77B5FE; margin-top:15px; margin-bottom: 15px; margin-right:15px;">
                                        <p lang="fr">Votre navigateur ne supporte pas la balise canvas.</p>
                                    </canvas>
                                </div>
                                <script src="{{ asset(cartactivity.activity.files.uploadDir ~ '/' ~ cartactivity.activity.files.id ~ '.' ~ cartactivity.activity.files.url) }}"></script>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn center-block shadow btnBeigeElton bold" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% elseif cartactivity.activity.files.url == "mp4" %}
                <div class="modal fade myVimeoModal" id="{{cartactivity.activity.id}}Modal" tabindex="-1" role="dialog" aria-labelledby="myVimeoModalLabel" aria-hidden="true" >
                    <div class="modal-dialog" style="width:57%; height:57%;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                <h4 class="modal-title label label-warning modalFS" id="myVimeoModalLabel">Vidéo</h4>
                            </div>
                            <div class="modal-body" style="text-align:center; width:100%; height:100%;">
                                {% set videoName = cartactivity.activity.files.alt|slice(0, cartactivity.activity.files.alt|length-4) %}
                                <iframe id="vimeoIframe" style="width:100%; height: 100%;" src="//player.vimeo.com/video/{{videoName}}" width="500" height="281" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn center-block shadow btnBeigeElton bold" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% elseif cartactivity.activity.files.url == "pdf" %}
                <div class="modal fade" id="{{cartactivity.activity.id}}Modal" tabindex="-1" role="dialog" aria-labelledby="myPdfModalLabel" aria-hidden="true" >
                    <div class="modal-dialog" style="width: 90%; height:75%;">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
                                <h4 class="modal-title label label-warning modalFS" id="myPdfModalLabel">{{activity.files.alt|slice(0, activity.files.alt|length-4)}}</h4>
                            </div>
                            <div class="modal-body" style="width:100%; height:1%; text-align: center;">
                                <iframe style="width: 95%; height: 90%;" src='{{ asset(cartactivity.activity.files.uploadDir ~ '/' ~ cartactivity.cartactivity.activity.files.id ~ '.' ~ cartactivity.activity.files.url) }}'  align="middle"></iframe>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn center-block shadow btnBeigeElton bold" data-dismiss="modal">Fermer</button>
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endfor %}
    <div class="container">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                <h1 class="lessonCategoryTitle" style="color: grey;">Mon panier d'activités</h1><br/><br/>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6"></div>
            <div class="col-md-4 center">
                <h1 class="txtViolet">Ma classe</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8">
                 <div id="unsetted">
                    <div id="unsetted1" style="width:50%; float:left;">
                        {% if cart %}
                            {% for cartactivity in cart %} 
                                {% if loop.index > 3 %}
                                {% else %}    
                                    <div class="bouger" id="{{cartactivity.activity.id}}parent">
                                        <div class="bougerImage">                                        
                                            <img class="resizeCartType" src="{{asset('bundles/eltoncore/images/' ~ cartactivity.activity.type ~'blanc.png')}}"/>
                                        </div>
                                        <div class="bougerEnfant" style="" onclick="setSelect({{cartactivity.activity.id}}, {{cartactivity.cart.id}})" id="{{cartactivity.activity.id}}">
                                            <img class="resizeCartPicture  hidden-xs" src="{{ asset(cartactivity.activity.file.uploadDir ~ '/' ~ cartactivity.activity.file.id ~ '.' ~ cartactivity.activity.file.url) }}" alt="{{cartactivity.activity.file.alt}}"/>
                                            <p id="{{cartactivity.activity.id}}p" style="margin-left:0px!important;margin-top: 7px;">{{ cartactivity.activity }}</p>
                                        </div>
                                    </div><br/>
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <div id="tadada" style="border:1px dashed grey; width: 80%; height: 170px; margin-top: 25px; text-align: center;display:inline-block;">
                                <p style="display:table-cell; line-height: 55px; width:45%; margin:auto!important;">Déposez <br/> une activité <br/> ici</p>
                            </div>
                        {% endif %}
                    </div>
                    <div id="unsetted2" style="width:50%; float:right;">
                        {% if cart %}
                            {% for cartactivity in cart %} 
                                {% if loop.index < 4 %}
                                {% else %}     
                                    <div class="bouger" id="{{cartactivity.activity.id}}parent">
                                        <div class="bougerImage">                                        
                                            <img class="resizeCartType" src="{{asset('bundles/eltoncore/images/' ~ cartactivity.activity.type ~'blanc.png')}}"/>
                                        </div>
                                        <div class="bougerEnfant" style="" onclick="setSelect({{cartactivity.activity.id}}, {{cartactivity.cart.id}})" id="{{cartactivity.activity.id}}">
                                            <img class="resizeCartPicture  hidden-xs" src="{{ asset(cartactivity.activity.file.uploadDir ~ '/' ~ cartactivity.activity.file.id ~ '.' ~ cartactivity.activity.file.url) }}" alt="{{cartactivity.activity.file.alt}}"/>
                                            <p id="{{cartactivity.activity.id}}p" style="margin-left:0px!important;margin-top: 7px;">{{ cartactivity.activity }}</p>
                                        </div>
                                    </div><br/>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
                <div id="setted">
                    <div id="setted1" style="width:50%; float:left;">
                        {% if settedCart %}
                            {% for cartactivity in settedCart %}
                                {% if loop.index > 3 %}
                                {% else %}
                                    <div class="bouger" id="{{cartactivity.activity.id}}parent">
                                        <div class="bougerImage">                                        
                                            <img class="resizeCartType" src="{{asset('bundles/eltoncore/images/' ~ cartactivity.activity.type ~'blanc.png')}}"/>
                                        </div>
                                        <div class="bougerEnfant" style="" onclick="setSelect({{cartactivity.activity.id}}, {{cartactivity.cart.id}})" id="{{cartactivity.activity.id}}">
                                            <img class="resizeCartPicture  hidden-xs" src="{{ asset(cartactivity.activity.file.uploadDir ~ '/' ~ cartactivity.activity.file.id ~ '.' ~ cartactivity.activity.file.url) }}" alt="{{cartactivity.activity.file.alt}}"/>
                                            <p id="{{cartactivity.activity.id}}p" style="margin-left:0px!important;margin-top: 7px;">{{ cartactivity.activity }}</p>
                                        </div>
                                    </div><br/>
                                {% endif %}
                            {% endfor %}
                            {% else %}
                            <div id="tadada" style="border:1px dashed grey; width: 80%; height: 170px; margin-top: 25px; text-align: center;display:inline-block;">
                                <p style="display:table-cell; line-height: 55px; width:45%; margin:auto!important;">Déposez <br/> une activité <br/> ici</p>
                            </div>
                        {% endif %}
                    </div>
                    <div id="setted2" style="width:50%; float:right;">
                        {% if settedCart %}
                            {% for cartactivity in settedCart %}
                                {% if loop.index < 4 %}
                                {% else %}
                                    <div class="bouger" id="{{cartactivity.activity.id}}parent">
                                        <div class="bougerImage">                                        
                                            <img class="resizeCartType" src="{{asset('bundles/eltoncore/images/' ~ cartactivity.activity.type ~'blanc.png')}}"/>
                                        </div>
                                        <div class="bougerEnfant" style="" onclick="setSelect({{cartactivity.activity.id}}, {{cartactivity.cart.id}})" id="{{cartactivity.activity.id}}">
                                            <img class="resizeCartPicture  hidden-xs" src="{{ asset(cartactivity.activity.file.uploadDir ~ '/' ~ cartactivity.activity.file.id ~ '.' ~ cartactivity.activity.file.url) }}" alt="{{cartactivity.activity.file.alt}}"/>
                                            <p id="{{cartactivity.activity.id}}p" style="margin-left:0px!important;margin-top: 7px;">{{ cartactivity.activity }}</p>
                                        </div>
                                    <div><br/>
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8" style="text-align:center; margin-top: 20px;">
                <a class="buttonAll borderViolet violetH btnPanier1" id="attribuer">Attribuer à la classe</a>
                <a class="buttonAll borderVioletBis violetBisH btnPanier2" id="supprimer">Supprimer du panier</a>
                <a class="buttonAll borderBleu bleuH btnPanier4" id="lancer">Lancer l'activité</a>
            </div>
        </div>
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-8" style="text-align:center; margin-top: 20px;">
                <a class="buttonAll noir btnPanier3" href="{{path('empty_cart')}}">Vider le panier</a>
            </div>
        </div>
                
    </div>
{% endblock %} 